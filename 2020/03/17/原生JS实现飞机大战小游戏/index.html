
<!DOCTYPE html>
<html lang="zh-CN" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>原生JS实现飞机大战小游戏 - 成事者乃无言而进之愚 误事者乃踌躇不前之智。</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css">
    <meta name="keywords" content="TriDiamond Obsidian,"> 
    <meta name="description" content="Mr-mr(屑级码农)的博客,@TOC废话不多说我们直接开始吧
首先是最基础的html结构，三个小飞机图来表示己方剩余的血量，剩下的css样式自己设置即可。设置成这样就可以了
先创建一个游戏引擎
var Engine = {
 ,"> 
    <meta name="author" content="John Doe"> 
    <link rel="alternative" href="atom.xml" title="成事者乃无言而进之愚 误事者乃踌躇不前之智。" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    <link href="https://fonts.loli.net/css?family=Roboto+Mono|Rubik&display=swap" rel="stylesheet">
    
<link rel="stylesheet" href="//at.alicdn.com/t/font_1429596_nzgqgvnmkjb.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.7.2/animate.min.css">

    
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/codemirror.min.css">

    
<link rel="stylesheet" href="//cdn.bootcss.com/codemirror/5.48.4/theme/dracula.css">

    
<link rel="stylesheet" href="/css/obsidian.css">

    
<link rel="stylesheet" href="/css/ball-atom.min.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body class="loading">
    <script src="/live2d/autoload.js"></script>
    <div class="loader">
        <div class="la-ball-atom la-2x">
            <div></div>
            <div></div>
            <div></div>
            <div></div>
        </div>
    </div>
    <span id="config-title" style="display:none">成事者乃无言而进之愚 误事者乃踌躇不前之智。</span>
    <div id="loader"></div>
    <div id="single">
    <div class="scrollbar gradient-bg-rev"></div>
<div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <div class="navigation animated fadeIn fast delay-1s">
        <img id="home-icon" class="icon-home" src="/img/favicon.png" alt="" data-url="http://yoursite.com">
        <div id="play-icon" title="Play/Pause" class="iconfont icon-play"></div>
        <h3 class="subtitle">原生JS实现飞机大战小游戏</h3>
        <div class="social">
            <!--        <div class="like-icon">-->
            <!--            <a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
            <!--        </div>-->
            <div>
                <div class="share">
                    
                        <a href="javascript:;" class="iconfont icon-share1"></a>
                        <div class="share-component-cc" data-disabled="facebook,douban,linkedin,diandian,tencent,google"></div>
                    
                </div>
            </div>
        </div>
    </div>
</div>

    <div class="section">
        <div class=article-header-wrapper>
    <div class="article-header">
        <div class="article-cover animated fadeIn" style="
            animation-delay: 600ms;
            animation-duration: 1.2s;
            background-image: 
                radial-gradient(ellipse closest-side, rgba(0, 0, 0, 0.65), #100e17),
                url(/img/cover.jpg) ">
        </div>
        <div class="else">
            <p class="animated fadeInDown">
                
                <a href="javascript:;"><b>「 </b>文章<b> 」</b></a>
                
                三月 17, 2020
            </p>
            <h3 class="post-title animated fadeInDown"><a href="/2020/03/17/%E5%8E%9F%E7%94%9FJS%E5%AE%9E%E7%8E%B0%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98%E5%B0%8F%E6%B8%B8%E6%88%8F/" title="原生JS实现飞机大战小游戏" class="">原生JS实现飞机大战小游戏</a>
            </h3>
            
            <p class="post-count animated fadeInDown">
                
                <span>
                    <b class="iconfont icon-text2"></b> <i>文章字数</i>
                    14k
                </span>
                
                
                <span>
                    <b class="iconfont icon-timer__s"></b> <i>阅读约需</i>
                    13 mins.
                </span>
                
                
                <span id="/2020/03/17/原生JS实现飞机大战小游戏/" class="leancloud_visitors" data-flag-title="原生JS实现飞机大战小游戏">
                    <b class="iconfont icon-read"></b> <i>阅读次数</i>
                    <span class="leancloud-visitors-count">1000000</span>
                </span>
                
                
            </p>
            
            
        </div>
    </div>
</div>

<div class="screen-gradient-after">
    <div class="screen-gradient-content">
        <div class="screen-gradient-content-inside">
            <div class="bold-underline-links screen-gradient-sponsor">
                <p>
                    <span class="animated fadeIn delay-1s"></span>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="article">
    <div class='main'>
        <div class="content markdown animated fadeIn">
            <p>@<a href="原生js实现飞机大战小游戏">TOC</a><br><strong>废话不多说我们直接开始吧</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200317144333483.jpg" alt="在这里插入图片描述"><br>首先是最基础的html结构，三个小飞机图来表示己方剩余的血量，剩下的css样式自己设置即可。<br><img src="https://img-blog.csdnimg.cn/20200317133843581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX21pbmdy,size_16,color_FFFFFF,t_70" alt=""><br>设置成这样就可以了</p>
<p><img src="https://img-blog.csdnimg.cn/20200317143407792.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX21pbmdy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>先创建一个游戏引擎</p>
<pre><code class="javascript">var Engine = {
    //刚开始的游戏状态
    gameStatus: false,
    //所有敌机
    enemy: {},
    //子弹
    bullet: {},
    //得分
    scroe: 0,
    //游戏开始按钮
    goplay: document.getElementById(&#39;start&#39;),
    //背景图片
    game: document.querySelector(&#39;.game&#39;),
    //页面得分
    textScroe: document.querySelector(&#39;.score&#39;),
    //游戏开始页面
    contentdiv: document.getElementById(&#39;contentdiv&#39;),
    //游戏结束分数界面
    gameover : document.querySelector(&#39;.gameover&#39;),
    //初始化
    init: function () {
        this.gameStart();
    },
        //游戏开始
    gameStart: function () {
        var _this = this; //保存this
        //点击按钮的时候判断游戏状态
        this.goplay.onclick = function () {
            _this.game.style.display = &quot;block&quot;;
            _this.contentdiv.style.display = &quot;none&quot;;
            if (!_this.gameStatus) {
                _this.gameStatus = true;
                //背景移动
                _this.bgMove();
                _this.handleMove();
                _this.createPlane();
            }
        }
    },
    //背景移动
    bgMove: function () {
        //设置背景每次移动距离
        var y = 0;
        //保存this
        var _this = this;
        //使用定时器来移动背景
        this.bgTimer = setInterval(function () {
            y += 2;
            _this.game.style[&#39;background-position-y&#39;] = y + &#39;px&#39;;
        }, 50)
    },
    createPlane: function () {
        //创建主角机
        Hero.init();

        //创建敌机
        this.createTimer = setInterval(function () {
        //获取随机数
         var num = parseInt(Math.random() * 15) + 1;
         //创建小飞机
         switch (num) {
             case 1:
             case 3:
             case 5:
             case 7:
             case 9:
             case 10:
                 new SmallEnemy().init();
                 break;
         //创建中性飞机
             case 2:
             case 4:
             case 6:
                 new MiddleEnemy().init();
         //创建大飞机（三个敌机对象在后续补充）
             case 8:
             case 12:
                 new LargeEnemy().init();
            }
        }, 500)
    },
    //所有敌机和子弹开始动起来
    handleMove: function () {
        //this指向改变提前保存
        var _this = this;
        this.moveTimer = setInterval(function () {
            //所有子弹
            for (var i in _this.bullet) {
                _this.bullet[i].move()
            }
            //所有敌机
            for (var i in _this.enemy) {
                _this.enemy[i].move()
            }

        }, 30)
    },
    //碰撞检测
       isCompact: function (obj1, obj2) {
           // –碰撞范围限定
           // 子弹左边坐标&gt;敌方飞机左边坐标
           // 子弹左边坐标&lt;敌方飞机左边坐标+敌方飞机的宽度
           // 子弹顶部坐标&gt;敌方飞机的顶部坐标
           // 子弹顶部坐标&lt;敌方飞机顶部坐标+敌方飞机的高度
        var l1 = obj1.offsetLeft &gt;= obj2.offsetLeft;
          var l2 = obj1.offsetLeft &lt;= obj2.offsetLeft + obj2.offsetWidth;
        var t1 = obj1.offsetTop &gt;= obj2.offsetTop;
        var t2 = obj1.offsetTop &lt;= obj2.offsetTop + obj2.offsetHeight;
                if (l1 &amp;&amp; l2 &amp;&amp; t1 &amp;&amp; t2) {
                //满足则击中返回true
                    return true;
                } else {
                    return false;
                }
            },
    //更新得分
    updateScroe: function (scroe) {
        this.scroe += scroe;
        this.textScroe.innerHTML = &quot;分数&quot; + this.scroe;
    },
    //游戏结束
    gameOver: function () {
      this.gameStatus = false,
      this.gameover.style.display=&#39;block&#39;;
      this.gameover.firstElementChild.innerHTML = 
      &#39;游戏结束，您的得分为&#39;+ this.scroe;
    //停止敌机
      clearInterval(this.createTimer);
      //子弹停止
      clearInterval(this.moveTimer);
    }
};
Engine.init();</code></pre>
<p>子弹嘛，设置多点才有游戏体验<br>两下就死了有啥好玩的<br><img src="https://img-blog.csdnimg.cn/20200317144246307.jpg" alt="在这里插入图片描述"><br>因为子弹需要大量的创建,所以创建一个子弹的构造函数<br>因为子弹是从主角机中间发射过来的所以需要获取主角机的x,y这里用l和t表示</p>
<pre><code class="javascript">function Bullet(l, t) {
            //存储传进来的 l t
            this.l = l;
            this.t = t;
            //初始化子弹
            this.self = null;
            //子弹的初始Left
            this.left = 0;
            //子弹的初始Top
            this.top = 0;
            //子弹的速度
            this.speed = 10;
            //子弹的编号 因为在引擎里面有一个专门存放子弹的对象，所以我们要给每一个子弹生成编号
            this.id = &#39;&#39;;
        }
        Bullet.prototype = {
            //手动添加构造函数
            constructor: Bullet,
            init: function () {
                //创建一个元素
                var img = document.createElement(&#39;img&#39;);
                //将图片的路径赋值给他
                img.src = &#39;image/bullet1.png&#39;;
                //插入game中
                Engine.game.appendChild(img);
                //赋值给子弹初始图片
                this.self = img;
                //当图片加载完成后获取图片的高度和宽度
                var _this = this;
                //在函数里面this的指向会改变，所以我们提前保存下来
                img.onload = function () {
                   //因为上面的元素属性有this.left所以我们应该和图片一样赋值给它
                   //子弹的left中心点等于 英雄机的宽度-子弹的宽度除以2
                    _this.left = _this.l - _this.self.offsetWidth / 2;
                    _this.top = _this.t - _this.self.offsetHeight;
                    img.style.left = _this.left + &#39;px&#39;;
                    img.style.top = _this.top + &#39;px&#39;;
                }
                //生成子弹编号并放入引擎的bullet中
                //编号选用当前时间戳以保证不会重复
                this.id = new Date().getTime();
                Engine.bullet[this.id] = this;
            },
            //子弹移动，定时器
            move: function () {
                this.top -= this.speed;
                this.self.style.top = this.top + &#39;px&#39;;
                //判断是否出界
                if (this.top &lt;= -this.self.offsetHeight) {
                    this.destroy();
                }
                //是否与敌机碰撞
                for (i in Engine.enemy) {
                    //调用引擎的判断碰撞函数
                    if (Engine.isCompact(this.self, Engine.enemy[i].self)) 
                        //true则删除
                        this.destroy();
                        //敌机血量减少
                        Engine.enemy[i].blood--;
                        //如果血量为0则删除
                        if (Engine.enemy[i].blood &lt;= 0) {
                            Engine.enemy[i].destroy();
                        }
                    }
                }
            },
            destroy: function () {
                //销毁
                //从页面消失
                this.self.remove();
                //从内存消失
                delete Engine.bullet[this.id];
            },
        }</code></pre>
<p>接下来创建主角机。因为主角机只有一架所以直接var一个就可以了<br>当然也可以创建一个构造函数不过不是很有必要<br><img src="https://img-blog.csdnimg.cn/20200317144547181.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX21pbmdy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<pre><code class="javascript">    var Hero = {
        //初始图片
        self: null,
        //初始left
        left: 0,
        //初始top
        top: 0,
        //生命值
        life: 3,
        //加载进来的图和爆炸的图
        imgs: [&#39;image/my.gif&#39;, &#39;image/bz.gif&#39;],
        //获得到自己的血量
        allHero: document.querySelectorAll(&#39;.life&gt;img&#39;),
        //初始化
    init: function () {
        //创建一个图片元素
        var img = document.createElement(&#39;img&#39;);
        //将图片路径赋值给它
        img.src = this.imgs[0];
        //插入到game中
        Engine.game.appendChild(img);
        //赋值给英雄机
        this.self = img;
           //当图片加载完成以后获取图片的高度和宽度
           var _this = this
           //在函数里this的指向会改变，所以我们提前保存下来
           img.onload = function () {
           //英雄机的left中心点等于（game的宽度-英雄机的宽度）除以2
           _this.left = (Engine.game.offsetWidth - img.offsetWidth) / 2;
           _this.top = Engine.game.offsetHeight - img.offsetHeight;
           img.style.left = _this.left + &#39;px&#39;;
           img.style.top = _this.top + &#39;px&#39;;
           //赋值后分别调用移动事件和子弹发射事件
            _this.move();
            _this.shoot();
             };
         },
          //英雄机移动事件
          move: function () {
          //类似放大镜事件
          var _this = this;
          //鼠标移动事件会改变this指向，提前保存this
          document.onmousemove = function (e) {
              //兼容谷歌 ie8
                 var e = e || event;
                var l = e.clientX - Engine.game.offsetLeft - 
                _this.self.offsetWidth / 2;
                var t = e.clientY - Engine.game.offsetTop - 
                _this.self.offsetHeight / 2;
                // 最大边界和最小边界
                  var lmax = Engine.game.offsetWidth - 
                  _this.self.offsetWidth;
                  var bmax = Engine.game.offsetHeight - 
                  _this.self.offsetHeight;
                 l = l &lt; 0 ? 0 : (l &gt; lmax ? lmax : l);
                 t = t &lt; 0 ? 0 : (t &gt; bmax ? bmax : t);
                 //赋值
                 _this.self.style.left = l + &quot;px&quot;;
                 _this.self.style.top = t + &quot;px&quot;;

                 //更新left  top
                 _this.left = l;
                 _this.top = t;
                }
            },

            //发射子弹
            shoot: function () {
                //每隔10毫秒发一次子弹
                var _this = this;
                //在定时器中this指向会改变，提前保存
                this.shootTimer = setInterval(function () {
                    var l = _this.left + _this.self.offsetWidth / 2
                    //创建子弹
                    new Bullet(l, _this.top).init();
                }, 30)
            },
             //主角机阵亡
            bang: function () {
                var img = document.createElement(&#39;img&#39;);
                //更换主角机爆炸的图片
                img.src = this.imgs[1];
                //使爆炸的主角机保留在当前位置
                img.style.left = this.left + &#39;px&#39;;
                img.style.top = this.top + &#39;px&#39;;
                //加入地图
                Engine.game.appendChild(img);
                //晚500毫秒后删除
                //调用一次行的定时器
                setTimeout = (function () {
                    img.remove();
                }, 500)
            },
            //主角机撞击事件
            die: function () {
                //主角机血量下降
                this.life--;
                //页面上的血量下降
                this.allHero = document.querySelectorAll(&#39;.life img&#39;);
                this.allHero[0].remove();
                console.log(this.allHeart, this.allHero[0]);
                //英雄机血量为0,游戏结束
                if (this.life &lt;= 0) {
                    this.destroy();
                }
            },
            destroy: function () {
                //删除英雄机
                this.self.remove();
                //执行英雄机爆炸事件函数
                this.bang();
                //停止发射子弹
                clearInterval(this.shootTimer);
                //执行游戏结束函数s
                Engine.gameOver();
            },
        }
        //在游戏没开始的时候不能出现英雄机和子弹所以Hero.init()要放在引擎里面</code></pre>
<p>创建敌机</p>
<pre><code class="javascript">function SmallEnemy() {
       var s = parseInt(Math.random() * 3 + 3);
       Enemy.call(this, 1, s, [&#39;image/enemy1.png&#39;, &#39;image/xx.gif&#39;], 10)
}
SmallEnemy.prototype = {
       //改变原型指向Enemy
       constructor: SmallEnemy,
       __proto__: Enemy.prototype
};
function MiddleEnemy() {
       var s = parseInt(Math.random() * 3 + 2);
       Enemy.call(this, 5, s, [&#39;image/enemy2.png&#39;, &#39;image/zz.gif&#39;], 20)
        }
        MiddleEnemy.prototype = {
            //改变原型指向Enemy
            constructor: MiddleEnemy,
            __proto__: Enemy.prototype
        }

function LargeEnemy() {
      var s = parseInt(Math.random() * 2 + 1);
      Enemy.call(this, 10, s, [&#39;image/enemy3.png&#39;, &#39;image/dd.gif&#39;], 50)
      }
        LargeEnemy.prototype = {
            //改变原型指向Enemy
            constructor: LargeEnemy,
            __proto__: Enemy.prototype
        }</code></pre>
<p>在这之后整个游戏就算勉强能玩了。<br><img src="https://img-blog.csdnimg.cn/20200317144728765.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX21pbmdy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>启动游戏<br><img src="https://img-blog.csdnimg.cn/20200317143432365.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX21pbmdy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200317143454488.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX21pbmdy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>子弹设置的太猛了看起来像某种东西emmmmm…..<br><img src="https://img-blog.csdnimg.cn/20200317143829191.gif" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/2020031714353586.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX21pbmdy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>游戏结束<img src="https://img-blog.csdnimg.cn/20200317143933444.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L01yX21pbmdy,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">写道最后才发现忘记设置暂停游戏了。索性就放着了以后在写。</p>
<p>萌新发帖。不足之处请大佬们手下留情。有问题直接指出。我一定虚心接受</p>
<p><img src="https://img-blog.csdnimg.cn/20200317144800597.gif" alt="在这里插入图片描述"></p>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls"
                data-autoplay="true">
                <source type="audio/mpeg" src="">
            </audio>
            
            <ul id="audio-list" style="display:none">
                
                
                <li title='0' data-url='/statics/de1'></li>
                
                    
                
                <li title='1' data-url='/statics/de2'></li>
                
                    
                
                <li title='2' data-url='/statics/de3'></li>
                
                    
            </ul>
            
            
            
            <div id="vcomments"></div>
            
        </div>
        <div class="sidebar">
            <div class="box animated fadeInRight">
                <div class="subbox">
                    <img src="https://res.cloudinary.com/tridiamond/image/upload/v1573019751/TriDiamond_logo_ui_xeublz.jpg" height=300 width=300></img>
                    <p>John Doe</p>
                    <span>偷偷抱走雷姆应该没人发现吧 (⊙o⊙)？</span>
                    <dl>
                        <dd><a href="https://github.com/TriDiamond" target="_blank"><span
                                    class=" iconfont icon-github"></span></a></dd>
                        <dd><a href="https://twitter.com/TriDiamond6" target="_blank"><span
                                    class=" iconfont icon-twitter"></span></a></dd>
                        <dd><a href="https://stackoverflow.com/users/7602324/tridiamond?tab=profile" target="_blank"><span
                                    class=" iconfont icon-stack-overflow"></span></a></dd>
                    </dl>
                </div>
                <ul>
                    <li><a href="/">1 <p>文章</p></a></li>
                    <li><a href="/categories">0 <p>分类</p></a></li>
                    <li><a href="/tags">0 <p>标签</p></a></li>
                </ul>
            </div>
            
            
            
            
        </div>
    </div>
</div>

    </div>
</div>
    <div id="back-to-top" class="animated fadeIn faster">
        <div class="flow"></div>
        <span class="percentage animated fadeIn faster">0%</span>
        <span class="iconfont icon-top02 animated fadeIn faster"></span>
    </div>
</body>
<footer>
    <p class="copyright" id="copyright">
        &copy; 2020
        <span class="gradient-text">
            John Doe
        </span>.
        Powered by <a href="http://hexo.io/" title="Hexo" target="_blank" rel="noopener">Hexo</a>
        Theme
        <span class="gradient-text">
            <a href="https://github.com/TriDiamond/hexo-theme-obsidian" title="Obsidian" target="_blank" rel="noopener">Obsidian</a>
        </span>
        <small><a href="https://github.com/TriDiamond/hexo-theme-obsidian/blob/master/CHANGELOG.md" title="v1.4.3" target="_blank" rel="noopener">v1.4.3</a></small>
    </p>
</footer>

<script type="text/javascript" src="https://cdn.bootcss.com/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<script>
  MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX", "TeX"],
      linebreaks: {
        automatic: true
      },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [
        ["$", "$"],
        ["\\(", "\\)"]
      ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      noUndefined: {
        attributes: {
          mathcolor: "red",
          mathbackground: "#FFEEEE",
          mathsize: "90%"
        }
      },
      Macros: {
        href: "{}"
      }
    },
    messageStyle: "none"
  });
</script>
<script>
  function initialMathJax() {
    MathJax.Hub.Queue(function () {
      var all = MathJax.Hub.getAllJax(),
        i;
      // console.log(all);
      for (i = 0; i < all.length; i += 1) {
        console.log(all[i].SourceElement().parentNode)
        all[i].SourceElement().parentNode.className += ' has-jax';
      }
    });
  }

  function reprocessMathJax() {
    if (typeof MathJax !== 'undefined') {
      MathJax.Hub.Queue(["Typeset", MathJax.Hub]);
    }
  }
</script>




<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/obsidian.js"></script>
<script src="/js/jquery.truncate.js"></script>
<script src="/js/search.js"></script>


<script src="//cdn.bootcss.com/typed.js/2.0.10/typed.min.js"></script>


<script src="//cdn.bootcss.com/blueimp-md5/2.12.0/js/md5.min.js"></script>


<script src="//cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>


<script src="https://cdn.bootcss.com/codemirror/5.48.4/codemirror.min.js"></script>

    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/javascript/javascript.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/css/css.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/xml/xml.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/htmlmixed/htmlmixed.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/clike/clike.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/php/php.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/shell/shell.min.js"></script>


    
<script src="//cdn.bootcss.com/codemirror/5.48.4/mode/python/python.min.js"></script>






<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.css">
<link rel="stylesheet" href="//cdn.bootcss.com/photoswipe/4.1.3/default-skin/default-skin.min.css">


<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe.min.js"></script>
<script src="//cdn.bootcss.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>



    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="//www.googletagmanager.com/gtag/js?id=UA-149874671-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-149874671-1');
    </script>





<script>
    function initialTyped () {
        var typedTextEl = $('.typed-text');
        if (typedTextEl && typedTextEl.length > 0) {
            var typed = new Typed('.typed-text', {
                strings: ["偷偷抱走雷姆应该没人发现吧 (⊙o⊙)？", "努力活成别人羡慕的样子!"],
                typeSpeed: 90,
                loop: true,
                loopCount: Infinity,
                backSpeed: 20,
            });
        }
    }

    if ($('.article-header') && $('.article-header').length) {
        $(document).ready(function () {
            initialTyped();
        });
    }
</script>


    
<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

    <script>

        var valine = new Valine();

        function initValine(path) {
            if (!path) path = window.location.pathname;
            let language = 'zh-CN';
            if (!language) {
                language = 'en';
            } else {
                language = language.toLowerCase();
            }
            valine.init({
                el: '#vcomments',
                appId: 'UEYwq47QD33N42VJof3Pc91c-gzGzoHsz',
                appKey: 'SXG5NwMXJ55UacHnQF4mOedz',
                notify: 'false',
                verify: 'false',
                avatar: 'mp',
                placeholder: 'Leave your throughs behind~',
                visitor: 'true',
                path: path,
                lang: language
            });
        }

        $(document).ready(function () {
            initValine();
        });
    </script>



</html>
